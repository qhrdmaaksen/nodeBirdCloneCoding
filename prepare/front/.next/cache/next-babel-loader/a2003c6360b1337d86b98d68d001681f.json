{"ast":null,"code":"import shortId from 'shortid';\nimport produce from 'immer';\nimport faker from 'faker';\nexport const initialState = {\n  mainPosts: [{\n    id: shortId.generate(),\n    User: {\n      id: shortId.generate(),\n      nickname: '비타민'\n    },\n    content: '첫 번째 게시글 #해시태그 #익스프레스',\n    Images: [{\n      id: shortId.generate(),\n      src: 'https://bookthumb-phinf.pstatic.net/cover/137/995/13799585.jpg?udate=20180726'\n    }, {\n      id: shortId.generate(),\n      src: 'https://gimg.gilbut.co.kr/book/BN001958/rn_view_BN001958.jpg'\n    }, {\n      id: shortId.generate(),\n      src: 'https://gimg.gilbut.co.kr/book/BN001998/rn_view_BN001998.jpg'\n    }],\n    Comments: [{\n      id: shortId.generate(),\n      User: {\n        id: shortId.generate(),\n        nickname: 'nero'\n      },\n      content: '개정판이 나왔네요!?'\n    }, {\n      id: shortId.generate(),\n      User: {\n        id: shortId.generate(),\n        nickname: 'hero'\n      },\n      content: '정말정말 신기하당!'\n    }]\n  }],\n  imagePaths: [],\n  // 이미지 경로들이 저장됨\n  addPostLoading: false,\n  // 게시물 등록중 로딩\n  addPostDone: false,\n  // 게시물 추가가 완료되었을때 true 변환\n  addPostError: null,\n  removePostLoading: false,\n  // 게시물 삭제중 로딩\n  removePostDone: false,\n  // 게시물 삭제가 완료되었을때 true 변환\n  removePostError: null,\n  addCommentLoading: false,\n  // 댓글 등록중 로딩\n  addCommentDone: false,\n  // 게시물 추가가 완료되었을때 true 변환\n  addCommentError: null\n};\nArray(20).fill().map((v, i) => {}); //게시글 작성하는 액션\n\nexport const ADD_POST_REQUEST = 'ADD_POST_REQUEST'; // 변수로 따로 만들어줘야 중간에 오타가나는 일을 막을 수 있다\n\nexport const ADD_POST_SUCCESS = 'ADD_POST_SUCCESS';\nexport const ADD_POST_FAILURE = 'ADD_POST_FAILURE';\nexport const REMOVE_POST_REQUEST = 'REMOVE_POST_REQUEST';\nexport const REMOVE_POST_SUCCESS = 'REMOVE_POST_SUCCESS';\nexport const REMOVE_POST_FAILURE = 'REMOVE_POST_FAILURE';\nexport const ADD_COMMENT_REQUEST = 'ADD_COMMENT_REQUEST';\nexport const ADD_COMMENT_SUCCESS = 'ADD_COMMENT_SUCCESS';\nexport const ADD_COMMENT_FAILURE = 'ADD_COMMENT_FAILURE';\nexport const addPost = data => ({\n  type: ADD_POST_REQUEST,\n  data\n}); // dynamic action create\n\nexport const addComment = data => ({\n  type: ADD_COMMENT_REQUEST,\n  data\n});\n\nconst dummyPost = data => ({\n  id: data.id,\n  content: data.content,\n  User: {\n    id: 1,\n    nickname: '비타민'\n  },\n  Images: [],\n  Comments: []\n});\n\nconst dummyComment = data => ({\n  id: shortId.generate(),\n  content: data,\n  User: {\n    id: 1,\n    nickname: '비타민'\n  }\n}); // 이전 상태를 액션을 통해 다음 상태로 만들어내는 함수\n\n\nconst reducer = (state = initialState, action) => produce(state, draft => {\n  // immer 사용시 state 를 draft 로 교체해주며, switch 문인걸 인식하고 break 를 까먹지말자\n  switch (action.type) {\n    case ADD_POST_REQUEST:\n      draft.addPostLoading = true;\n      draft.addPostDone = false;\n      draft.addPostError = null;\n      break;\n\n    case ADD_POST_SUCCESS:\n      draft.mainPosts.unshift(dummyPost(action.data));\n      draft.addPostLoading = false;\n      draft.addPostDone = true;\n      break;\n\n    case ADD_POST_FAILURE:\n      draft.addPostLoading = false;\n      draft.addPostError = action.data;\n      break;\n\n    case REMOVE_POST_REQUEST:\n      draft.removePostLoading = true;\n      draft.removePostDone = false;\n      draft.removePostError = null;\n      break;\n\n    case REMOVE_POST_SUCCESS:\n      draft.mainPosts = draft.mainPosts.filter(v => v.id !== action.data); // 지울땐 보통 filter 가 편하다\n\n      draft.PostLoading = false;\n      draft.PostDone = true;\n      break;\n\n    case REMOVE_POST_FAILURE:\n      draft.removePostLoading = false;\n      draft.removePostError = action.error;\n      break;\n\n    case ADD_COMMENT_REQUEST:\n      draft.addCommentLoading = true;\n      draft.addCommentDone = false;\n      draft.addCommentError = null;\n      break;\n\n    case ADD_COMMENT_SUCCESS:\n      {\n        //action.data.content, postId, userId\n        const post = draft.mainPosts.find(v => v.id === action.data.postId); // 게시글 리스트중에 post 찾기\n\n        post.Comments.unshift(dummyComment(action.data.content)); // 찾은 post 에 맨 앞에 가짜 댓글 하나 넣어줌\n\n        draft.addCommentLoading = false;\n        draft.addCommentDone = true;\n        break;\n      }\n\n    case ADD_COMMENT_FAILURE:\n      draft.addCommentLoading = false;\n      draft.addCommentError = action.error;\n      break;\n\n    default:\n      break;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["D:/intellijProjects/react-nodebird/prepare/front/reducers/post.js"],"names":["shortId","produce","faker","initialState","mainPosts","id","generate","User","nickname","content","Images","src","Comments","imagePaths","addPostLoading","addPostDone","addPostError","removePostLoading","removePostDone","removePostError","addCommentLoading","addCommentDone","addCommentError","Array","fill","map","v","i","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","addPost","data","type","addComment","dummyPost","dummyComment","reducer","state","action","draft","unshift","filter","PostLoading","PostDone","error","post","find","postId"],"mappings":"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","sourcesContent":["import shortId from 'shortid'\r\nimport produce from 'immer'\r\nimport faker from 'faker'\r\n\r\nexport const initialState = {\r\n\tmainPosts: [\r\n\t\t{\r\n\t\t\tid: shortId.generate(),\r\n\t\t\tUser: {\r\n\t\t\t\tid: shortId.generate(),\r\n\t\t\t\tnickname: '비타민',\r\n\t\t\t},\r\n\t\t\tcontent: '첫 번째 게시글 #해시태그 #익스프레스',\r\n\t\t\tImages: [{\r\n\t\t\t\tid: shortId.generate(),\r\n\t\t\t\tsrc: 'https://bookthumb-phinf.pstatic.net/cover/137/995/13799585.jpg?udate=20180726',\r\n\t\t\t}, {\r\n\t\t\t\tid: shortId.generate(),\r\n\t\t\t\tsrc: 'https://gimg.gilbut.co.kr/book/BN001958/rn_view_BN001958.jpg',\r\n\t\t\t}, {\r\n\t\t\t\tid: shortId.generate(),\r\n\t\t\t\tsrc: 'https://gimg.gilbut.co.kr/book/BN001998/rn_view_BN001998.jpg',\r\n\t\t\t}],\r\n\t\t\tComments: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: shortId.generate(),\r\n\t\t\t\t\tUser: {\r\n\t\t\t\t\t\tid: shortId.generate(),\r\n\t\t\t\t\t\tnickname: 'nero',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: '개정판이 나왔네요!?',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: shortId.generate(),\r\n\t\t\t\t\tUser: {\r\n\t\t\t\t\t\tid: shortId.generate(),\r\n\t\t\t\t\t\tnickname: 'hero',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: '정말정말 신기하당!',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t],\r\n\timagePaths: [], // 이미지 경로들이 저장됨\r\n\taddPostLoading: false, // 게시물 등록중 로딩\r\n\taddPostDone: false, // 게시물 추가가 완료되었을때 true 변환\r\n\taddPostError: null,\r\n\tremovePostLoading: false, // 게시물 삭제중 로딩\r\n\tremovePostDone: false, // 게시물 삭제가 완료되었을때 true 변환\r\n\tremovePostError: null,\r\n\taddCommentLoading: false, // 댓글 등록중 로딩\r\n\taddCommentDone: false, // 게시물 추가가 완료되었을때 true 변환\r\n\taddCommentError: null,\r\n}\r\n\r\nArray(20).fill().map((v,i) => {\r\n\t\r\n})\r\n\r\n//게시글 작성하는 액션\r\nexport const ADD_POST_REQUEST = 'ADD_POST_REQUEST'; // 변수로 따로 만들어줘야 중간에 오타가나는 일을 막을 수 있다\r\nexport const ADD_POST_SUCCESS = 'ADD_POST_SUCCESS';\r\nexport const ADD_POST_FAILURE = 'ADD_POST_FAILURE';\r\n\r\nexport const REMOVE_POST_REQUEST = 'REMOVE_POST_REQUEST';\r\nexport const REMOVE_POST_SUCCESS = 'REMOVE_POST_SUCCESS';\r\nexport const REMOVE_POST_FAILURE = 'REMOVE_POST_FAILURE';\r\n\r\nexport const ADD_COMMENT_REQUEST = 'ADD_COMMENT_REQUEST';\r\nexport const ADD_COMMENT_SUCCESS = 'ADD_COMMENT_SUCCESS';\r\nexport const ADD_COMMENT_FAILURE = 'ADD_COMMENT_FAILURE';\r\n\r\nexport const addPost = (data) => ({\r\n\ttype: ADD_POST_REQUEST,\r\n\tdata,\r\n})\r\n\r\n// dynamic action create\r\nexport const addComment = (data) => ({\r\n\ttype: ADD_COMMENT_REQUEST,\r\n\tdata,\r\n})\r\n\r\nconst dummyPost = (data) => ({\r\n\tid: data.id,\r\n\tcontent: data.content,\r\n\tUser: {\r\n\t\tid: 1,\r\n\t\tnickname: '비타민',\r\n\t},\r\n\tImages: [],\r\n\tComments: [],\r\n})\r\n\r\nconst dummyComment = (data) => ({\r\n\tid: shortId.generate(),\r\n\tcontent: data,\r\n\tUser: {\r\n\t\tid: 1,\r\n\t\tnickname: '비타민',\r\n\t}\r\n})\r\n// 이전 상태를 액션을 통해 다음 상태로 만들어내는 함수\r\nconst reducer = (state = initialState, action) => \tproduce(state, (draft) => {\r\n\t// immer 사용시 state 를 draft 로 교체해주며, switch 문인걸 인식하고 break 를 까먹지말자\r\n\t\tswitch (action.type) {\r\n\t\t\tcase ADD_POST_REQUEST:\r\n\t\t\t\tdraft.addPostLoading = true;\r\n\t\t\t\tdraft.addPostDone = false;\r\n\t\t\t\tdraft.addPostError = null;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ADD_POST_SUCCESS:\r\n\t\t\t\tdraft.mainPosts.unshift(dummyPost(action.data))\r\n\t\t\t\tdraft.addPostLoading = false\r\n\t\t\t\tdraft.addPostDone = true\r\n\t\t\t\tbreak;\r\n\t\t\tcase ADD_POST_FAILURE:\r\n\t\t\t\tdraft.addPostLoading = false\r\n\t\t\t\tdraft.addPostError = action.data\r\n\t\t\t\tbreak;\r\n\t\t\tcase REMOVE_POST_REQUEST:\r\n\t\t\t\tdraft.removePostLoading = true\r\n\t\t\t\tdraft.removePostDone = false\r\n\t\t\t\tdraft.removePostError = null\r\n\t\t\t\tbreak;\r\n\t\t\tcase REMOVE_POST_SUCCESS:\r\n\t\t\t\tdraft.mainPosts = draft.mainPosts.filter((v) => v.id !== action.data) // 지울땐 보통 filter 가 편하다\r\n\t\t\t\tdraft.PostLoading = false\r\n\t\t\t\tdraft.PostDone = true\r\n\t\t\t\tbreak;\r\n\t\t\tcase REMOVE_POST_FAILURE:\r\n\t\t\t\tdraft.removePostLoading = false\r\n\t\t\t\tdraft.removePostError = action.error\r\n\t\t\t\tbreak;\r\n\t\t\tcase ADD_COMMENT_REQUEST:\r\n\t\t\t\tdraft.addCommentLoading = true\r\n\t\t\t\tdraft.addCommentDone = false\r\n\t\t\t\tdraft.addCommentError = null\r\n\t\t\t\tbreak;\r\n\t\t\tcase ADD_COMMENT_SUCCESS: {\r\n\t\t\t\t//action.data.content, postId, userId\r\n\t\t\t\tconst post = draft.mainPosts.find((v) => v.id === action.data.postId) // 게시글 리스트중에 post 찾기\r\n\t\t\t\tpost.Comments.unshift(dummyComment(action.data.content)) // 찾은 post 에 맨 앞에 가짜 댓글 하나 넣어줌\r\n\t\t\t\tdraft.addCommentLoading = false\r\n\t\t\t\tdraft.addCommentDone = true\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase ADD_COMMENT_FAILURE:\r\n\t\t\t\tdraft.addCommentLoading = false\r\n\t\t\t\tdraft.addCommentError = action.error\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t})\r\nexport default reducer\r\n"]},"metadata":{},"sourceType":"module"}